\documentclass[slides]{subfiles}

\begin{document}
    \begin{frame}<1-4,6-12>[label=extractionpipe]{Lexicalized Rule Extraction}
        \resizebox{\linewidth}{!}{%
        \begin{tikzpicture}
            \node[scale=0.8] (ctree) {\subfile{figures/ctrees/01-survey.tex}};

            \visible<2->{
                \node[scale=0.8, below=of ctree.south east, anchor=north, xshift=1cm] (bintree) {
                    \subfile{figures/ctrees/04.1-survey-unbinarized.tex}
                };
            }

            \visible<4->{
                \node[scale=0.8, right=of ctree] (guidetree) {
                    \subfile{figures/ctrees/05.1-survey-headguide.tex}
                };
            }

            \node[right=1.5cm of bintree.south east, anchor=south west, font=\small] (rulelist) {\begin{tabular}{lll}
                \visible<7->{where &  WRB & $W \to [\alt<-11|handout:0>{1}{\wildcard{}}]\begin{bmatrix}\tikz[tcomp, anchor=center]\node{WH} child { node {\alt<-11|handout:0>{1}{\wildcard{}}}};\end{bmatrix}$} \\[2mm]
                \visible<11->{the & DT & $\text{arg}(N) \to [\alt<-11|handout:0>{2}{\wildcard{}}][\alt<-11|handout:0>{2}{\wildcard{}}]$} \\[2mm]
                \visible<11->{survey &  NN & $N \to [x_1\alt<-11|handout:0>{3}{\wildcard{}}]\begin{bmatrix}\tikz[tcomp, anchor=center]\node{NP} child {node {x}} child { node {\alt<-11|handout:0>{3}{\wildcard{}}}};\end{bmatrix}$(\text{arg}(N))} \\[2mm]
                \visible<8->{was &  VBD & $S \to [\visible<9->{x_1}\visible<10->{y_1}\alt<-11|handout:0>{4}{\wildcard{}}\visible<9->{x_2}]\begin{bmatrix}\tikz[tcomp, anchor=center]\node{SBAR} child { node {S} child { node {VP} child { node {x}} child { node {\alt<-11|handout:0>{4}{\wildcard{}}}}} child {node {y}}};\end{bmatrix}(V_2, N)$
                } \\[6mm]
                \visible<11->{carried &  VBN & $V_2 \to [x_1,\alt<-11|handout:0>{5}{\wildcard{}}\y_1]\begin{bmatrix}\tikz[tcomp, anchor=center]\node{VP} child {node {x}} child { node {\alt<-11|handout:0>{5}{\wildcard{}}}} {child {node {y}}};\end{bmatrix}(W, P)$} \\[2mm]
                \visible<11->{out &  RP & $P \to [\alt<-11|handout:0>{6}{\wildcard{}}]\begin{bmatrix}\tikz[tcomp, anchor=center]\node{PRT} child { node {\alt<-11|handout:0>{6}{\wildcard{}}}};\end{bmatrix}$}\\
            \end{tabular}};


            \begin{scope}[dashed, gray, every node/.style={font=\small, text=black, align=left, draw=gray, rectangle, rounded corners=2pt, solid}, >=stealth]
                \draw[visible on=<2->] (ctree.-110) edge[bend right, ->] node[below left] {rank transformation:\\$\bullet$\,strategy\\$\bullet$\,direction\\$\bullet$\,Markovization} ($(bintree.north west)+(1,-1)$);
                \draw[visible on=<4->] ($(bintree)+(1,1)$) edge[bend right, ->] node[above left] {assign guide values:\\\alert<12|handout:0>{$\bullet$\,guide constructor}} (guidetree);
                \draw[visible on=<6->] (guidetree.0) edge[bend left, ->] node[above right] {rule extraction:\\\alert<13|handout:0>{$\bullet$\,nonterminal constructor}\\$\bullet$\,grammar formalism} (rulelist);
            \end{scope}
        \end{tikzpicture}%
        }
    \end{frame}
\end{document}